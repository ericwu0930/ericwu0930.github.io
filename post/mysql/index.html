<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="Eric&#39;s Blog">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://ericwu0930.github.io/img/roof.jpg">
    <meta property="twitter:image" content="https://ericwu0930.github.io/img/roof.jpg" />
    

    
    <meta name="title" content="数据库入门" />
    <meta property="og:title" content="数据库入门" />
    <meta property="twitter:title" content="数据库入门" />
    

    
    <meta name="description" content="吴昊，学生, 东川路男子职业学院，矛盾体 | 这里是 吴昊 的博客，与你一起发现更大的世界。">
    <meta property="og:description" content="吴昊，学生, 东川路男子职业学院，矛盾体 | 这里是 吴昊 的博客，与你一起发现更大的世界。" />
    <meta property="twitter:description" content="吴昊，学生, 东川路男子职业学院，矛盾体 | 这里是 吴昊 的博客，与你一起发现更大的世界。" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="吴昊, Eric Wu, 吴昊的博客, Eric&#39;s Blog, 博客, 个人网站, 互联网, Web, 云原生, PaaS, Istio, Kubernetes, 微服务, Microservice">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>数据库入门-吴昊的博客 | Eric&#39;s Blog</title>

    <link rel="canonical" href="/post/mysql/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/syntax.css">
    
    
    <link rel="stylesheet" href="/css/zanshang.css">
    
    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>

    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/androidstudio.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Eric&#39;s Blog</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/tech">tech</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
		    <li>
                        <a href="/search">SEARCH <img src="/img/search.png" height="15" style="cursor: pointer;" alt="Search"></a>
		    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/roof.jpg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="学习笔记">
                            学习笔记
                        </a>
                        
                        <a class="tag" href="/tags/mysql" title="mysql">
                            mysql
                        </a>
                        
                    </div>
                    <h1>数据库入门</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                                 &#34;Eric&#34;
                         
                        on 
                        Monday, December 9, 2019
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <header>
                    <h2>TOC</h2>
                </header>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#一mysql数据库软件">一、MySQL数据库软件</a>
      <ul>
        <li><a href="#mysql的结构">MySQL的结构</a></li>
        <li><a href="#存储引擎">存储引擎</a></li>
        <li><a href="#登录">登录</a></li>
        <li><a href="#退出">退出</a></li>
        <li><a href="#mysql目录结构">MySQL目录结构</a></li>
      </ul>
    </li>
    <li><a href="#二sql">二、SQL</a>
      <ul>
        <li><a href="#ddl操作数据库表">DDL：操作数据库、表</a></li>
        <li><a href="#dml增删改表中数据">DML：增删改表中数据</a></li>
        <li><a href="#dql查询表中的记录">DQL：查询表中的记录</a></li>
        <li><a href="#约束">约束</a></li>
      </ul>
    </li>
    <li><a href="#三多表查询">三、多表查询</a>
      <ul>
        <li><a href="#1-内连接">1. 内连接</a></li>
        <li><a href="#2-外连接">2. 外连接</a></li>
      </ul>
    </li>
    <li><a href="#四子查询">四、子查询</a></li>
    <li><a href="#五数据库的设计">五、数据库的设计</a>
      <ul>
        <li><a href="#1-多表之间的关系">1. 多表之间的关系</a></li>
        <li><a href="#2-数据库设计范式">2. 数据库设计范式</a></li>
      </ul>
    </li>
    <li><a href="#六数据库的备份还原">六、数据库的备份还原</a></li>
    <li><a href="#七事务">七、事务</a>
      <ul>
        <li><a href="#71-概念">7.1 概念</a></li>
        <li><a href="#72-事务的四大特征">7.2 事务的四大特征</a></li>
        <li><a href="#73-事务的隔离级别">7.3 事务的隔离级别</a></li>
      </ul>
    </li>
  </ul>
</nav>
                
                <h2 id="一mysql数据库软件">一、MySQL数据库软件</h2>
<h3 id="mysql的结构">MySQL的结构</h3>
<p>MySQL是一个客户端/服务器的架构，它的服务器程序直接和我们存储的数据打交道，然后可以有好多客户端程序连接到这个服务器程序，发送增删改查的请求，然后服务器就响应这些请求，从而操作它维护的数据。服务器进程对客户端进程发送的请求做了什么处理，才能产生最后的处理结果呢？客户端可以向服务器发送增删改查各类请求，我们这里以比较复杂的查询请求为例来画个图展示一下大致的过程：</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghoeysvse3j31120p0771.jpg" alt="image-20200812224636555"></p>
<h3 id="存储引擎">存储引擎</h3>
<p><code>MySQL</code>服务器把数据的存储和提取操作都封装到了一个叫<code>存储引擎</code>的模块里。我们知道<code>表</code>是由一行一行的记录组成的，但这只是一个逻辑上的概念，物理上如何表示记录，怎么从表中读取数据，怎么把数据写入具体的物理存储器上，这都是<code>存储引擎</code>负责的事情。为了实现不同的功能，<code>MySQL</code>提供了各式各样的<code>存储引擎</code>，不同<code>存储引擎</code>管理的表具体的存储结构可能不同，采用的存取算法也可能不同。</p>
<h3 id="登录">登录</h3>
<ol>
<li>mysql -uroot -p密码</li>
<li>mysql -hip -uroot -p连接目标的密码</li>
<li>mysql &ndash;host=ip &ndash;user=root &ndash;password=连接目标的密码</li>
</ol>
<h3 id="退出">退出</h3>
<ol>
<li>exit</li>
<li>quit</li>
</ol>
<h3 id="mysql目录结构">MySQL目录结构</h3>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfkw2reue4j31970u0tq4.jpg" alt="数据库目录"></p>
<p>MySQL有一个安装目录有一个数据目录，在数据目录中又有这样的几个概念</p>
<ul>
<li>数据库：文件夹</li>
<li>表：文件</li>
<li>数据：数据</li>
</ul>
<h2 id="二sql">二、SQL</h2>
<p>SQL全称为Structured Query Language，即结构化查询语言，其通用的语法有</p>
<ol>
<li>SQL 语句可以单行或多行书写，以分号结尾。</li>
<li>可使用空格和缩进来增强语句的可读性。</li>
<li>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</li>
<li>3 种注释
<ul>
<li>单行注释: &ndash; 注释内容 或</li>
<li>单行注释：#注释内容(mysql 特有)</li>
<li>多行注释: /* 注释 */</li>
</ul>
</li>
</ol>
<p>根据SQL操作的对象和功能不一样，被分为四大类</p>
<ol>
<li>
<p>DDL(Data Definition Language)数据定义语言</p>
<p>用来定义数据库对象：数据库，表，列等。关键字：create，drop，alter 等</p>
</li>
<li>
<p>DML(Data Manipulation Language)数据操作语言</p>
<p>用来对表中数据进行增删改，关键字：insert，delete，update等</p>
</li>
<li>
<p>DQL(Data Query Language)数据查询语言</p>
<p>用来查询数据库中表的记录。关键字：select，where等</p>
</li>
<li>
<p>DCL(Data Control Language)数据控制语言</p>
<p>用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等</p>
</li>
</ol>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfkw2olqysj31v00u07wh.jpg" alt="SQL语句分类"></p>
<h3 id="ddl操作数据库表">DDL：操作数据库、表</h3>
<p>对于DDL语句，可以分为操作数据库和操作表，并且对于数据库和表，又都可以分为CRUD操作，即Create，Retrieve，Update和Delete。</p>
<ol>
<li>
<h4 id="操作数据库">操作数据库</h4>
<p>1.1 Create：创建</p>
<ul>
<li>
<p>创建数据库：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">database</span> <span style="color:#960050;background-color:#1e0010">数据库名称；</span>
</code></pre></div></li>
<li>
<p>判断数据库是否存在，再创建：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">exists</span> <span style="color:#960050;background-color:#1e0010">数据库名称；</span>
</code></pre></div></li>
<li>
<p>创建数据库，并制定字符集：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">database</span> <span style="color:#960050;background-color:#1e0010">数据库名称</span> <span style="color:#66d9ef">character</span> <span style="color:#66d9ef">set</span> <span style="color:#960050;background-color:#1e0010">字符集名</span>;
</code></pre></div></li>
</ul>
<p>1.2 Retrieve：查询</p>
<ul>
<li>
<p>查询所有数据库的名称：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">databases</span><span style="color:#960050;background-color:#1e0010">；</span>
</code></pre></div></li>
<li>
<p>查询某个数据库的字符集：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">database</span> <span style="color:#960050;background-color:#1e0010">数据库名称</span>;
</code></pre></div></li>
</ul>
<p>1.3 Update: 修改</p>
<ul>
<li>
<p>修改数据库的字符集</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#960050;background-color:#1e0010">数据库名称</span> <span style="color:#66d9ef">character</span> <span style="color:#66d9ef">set</span> <span style="color:#960050;background-color:#1e0010">字符集名称；</span>
</code></pre></div></li>
</ul>
<p>1.4 Delete：删除</p>
<ul>
<li>
<p>删除数据库</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">database</span> <span style="color:#960050;background-color:#1e0010">数据库名称；</span>
</code></pre></div></li>
<li>
<p>先判断数据库是否存在，再删除</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">exists</span> <span style="color:#960050;background-color:#1e0010">数据库名称</span>;	
</code></pre></div></li>
</ul>
<p>1.5 使用数据库</p>
<ul>
<li>
<p>查询当前正在使用的数据库名称</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">database</span>()<span style="color:#960050;background-color:#1e0010">；</span>
</code></pre></div></li>
<li>
<p>使用数据库</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">use</span> <span style="color:#960050;background-color:#1e0010">数据库名称；</span>
</code></pre></div></li>
</ul>
</li>
<li>
<h4 id="操作表">操作表</h4>
<p>2.1 Create：创建</p>
<ul>
<li>创建表</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span>(
 <span style="color:#960050;background-color:#1e0010">列名</span><span style="color:#ae81ff">1</span> <span style="color:#960050;background-color:#1e0010">数据类型</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">，</span>
 <span style="color:#960050;background-color:#1e0010">列名</span><span style="color:#ae81ff">2</span> <span style="color:#960050;background-color:#1e0010">数据类型</span><span style="color:#ae81ff">2</span><span style="color:#960050;background-color:#1e0010">，</span>
 ...
 <span style="color:#960050;background-color:#1e0010">列名</span>n <span style="color:#960050;background-color:#1e0010">数据类型</span>n
);
   
<span style="color:#960050;background-color:#1e0010">数据类型：</span>
<span style="color:#ae81ff">1</span>. <span style="color:#66d9ef">int</span><span style="color:#960050;background-color:#1e0010">：整数类型</span>
   <span style="color:#f92672">*</span> age <span style="color:#66d9ef">int</span>,
<span style="color:#ae81ff">2</span>. <span style="color:#66d9ef">double</span><span style="color:#960050;background-color:#1e0010">（总位数，小数点后位数）</span>:<span style="color:#960050;background-color:#1e0010">小数类型</span>
   <span style="color:#f92672">*</span> score <span style="color:#66d9ef">double</span>(<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">2</span>)
<span style="color:#ae81ff">3</span>. <span style="color:#66d9ef">date</span>:<span style="color:#960050;background-color:#1e0010">日期，只包含年月日，</span>yyyy<span style="color:#f92672">-</span>MM<span style="color:#f92672">-</span>dd
<span style="color:#ae81ff">4</span>. <span style="color:#66d9ef">datetime</span>:<span style="color:#960050;background-color:#1e0010">日期，包含年月日时分秒</span>	 yyyy<span style="color:#f92672">-</span>MM<span style="color:#f92672">-</span>dd HH:mm:ss
<span style="color:#ae81ff">5</span>. <span style="color:#66d9ef">timestamp</span>:<span style="color:#960050;background-color:#1e0010">时间错类型</span>	<span style="color:#960050;background-color:#1e0010">包含年月日时分秒</span>	 yyyy<span style="color:#f92672">-</span>MM<span style="color:#f92672">-</span>dd HH:mm:ss	
   <span style="color:#f92672">*</span> <span style="color:#960050;background-color:#1e0010">如果将来不给这个字段赋值，或赋值为</span><span style="color:#66d9ef">null</span><span style="color:#960050;background-color:#1e0010">，则默认使用当前的系统时间，来自动赋值</span>
<span style="color:#ae81ff">6</span>. <span style="color:#66d9ef">varchar</span><span style="color:#960050;background-color:#1e0010">：字符串</span>
   <span style="color:#f92672">*</span> name <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">20</span>):<span style="color:#960050;background-color:#1e0010">姓名最大</span><span style="color:#ae81ff">20</span><span style="color:#960050;background-color:#1e0010">个字符复制表</span>
</code></pre></div><ul>
<li>复制表</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">like</span> <span style="color:#960050;background-color:#1e0010">被复制表明；</span>
</code></pre></div><p>2.2 Retrieve：查询</p>
<ul>
<li>查询某个数据库中所有的表名称</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">tables</span>;
</code></pre></div><ul>
<li>查询表结构</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">desc</span> <span style="color:#960050;background-color:#1e0010">表明</span>
</code></pre></div><p>2.3 Update：修改</p>
<ul>
<li>修改表名</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">rename</span> <span style="color:#66d9ef">to</span> <span style="color:#960050;background-color:#1e0010">新表名；</span>
</code></pre></div><ul>
<li>修改表的字符集</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">character</span> <span style="color:#66d9ef">set</span> <span style="color:#960050;background-color:#1e0010">字符集名称；</span>
</code></pre></div><ul>
<li>添加一列</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">add</span> <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#960050;background-color:#1e0010">数据类型；</span>
</code></pre></div><ul>
<li>修改列名称 类型</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">change</span> <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#960050;background-color:#1e0010">新列名</span> <span style="color:#960050;background-color:#1e0010">新数据类型；</span>
<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> modify <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#960050;background-color:#1e0010">新数据类型</span>
</code></pre></div><ul>
<li>删除列</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">drop</span> <span style="color:#960050;background-color:#1e0010">列名</span>	
</code></pre></div><p>2.4 Delete：删除</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名；</span>
<span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">table</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">exists</span> <span style="color:#960050;background-color:#1e0010">表名</span>
</code></pre></div></li>
</ol>
<h3 id="dml增删改表中数据">DML：增删改表中数据</h3>
<ol>
<li>
<p>添加数据：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#960050;background-color:#1e0010">表名</span>(<span style="color:#960050;background-color:#1e0010">列名</span><span style="color:#ae81ff">1</span>,<span style="color:#960050;background-color:#1e0010">列名</span><span style="color:#ae81ff">2</span>,...<span style="color:#960050;background-color:#1e0010">列名</span>n) <span style="color:#66d9ef">values</span>(<span style="color:#960050;background-color:#1e0010">值</span><span style="color:#ae81ff">1</span>,<span style="color:#960050;background-color:#1e0010">值</span><span style="color:#ae81ff">2</span>,...<span style="color:#960050;background-color:#1e0010">值</span>n);
</code></pre></div><ul>
<li>注意：
<ol>
<li>列名和值要一一对应。</li>
<li>如果表名后，不定义列名，则默认给所有列添加值
insert into 表名 values(值1,值2,&hellip;值n);</li>
<li>除了数字类型，其他类型需要使用引号(单双都可以)引起来</li>
</ol>
</li>
</ul>
</li>
<li>
<p>删除数据：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">delete</span> <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">表名</span> [<span style="color:#66d9ef">where</span> <span style="color:#960050;background-color:#1e0010">条件</span>]
</code></pre></div><ul>
<li>注意：
<ol>
<li>如果不加条件，则删除表中所有记录。</li>
<li>如果要删除所有记录
<ol>
<li>delete from 表名; &ndash; 不推荐使用。有多少条记录就会执行多少次删除操作</li>
<li>TRUNCATE TABLE 表名; &ndash; 推荐使用，效率更高 先删除表，然后再创建一张一样的表。</li>
</ol>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>修改数据：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">update</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">set</span> <span style="color:#960050;background-color:#1e0010">列名</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">值</span><span style="color:#ae81ff">1</span>, <span style="color:#960050;background-color:#1e0010">列名</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">值</span><span style="color:#ae81ff">2</span>,... [<span style="color:#66d9ef">where</span> <span style="color:#960050;background-color:#1e0010">条件</span>];
</code></pre></div><ul>
<li>注意：如果不加任何条件，则会将表中所有记录全部修改。</li>
</ul>
</li>
</ol>
<h3 id="dql查询表中的记录">DQL：查询表中的记录</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">表名</span>;

<span style="color:#66d9ef">select</span>
		<span style="color:#960050;background-color:#1e0010">字段列表</span>
<span style="color:#66d9ef">from</span>
		<span style="color:#960050;background-color:#1e0010">表名列表</span>
<span style="color:#66d9ef">where</span>
		<span style="color:#960050;background-color:#1e0010">条件列表</span>
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span>
		<span style="color:#960050;background-color:#1e0010">分组字段</span>
<span style="color:#66d9ef">having</span>
		<span style="color:#960050;background-color:#1e0010">分组之后的条件</span>
<span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span>
		<span style="color:#960050;background-color:#1e0010">排序</span>
<span style="color:#66d9ef">limit</span>
		<span style="color:#960050;background-color:#1e0010">分页限定</span>
</code></pre></div><ol>
<li>
<p>多个字段的查询</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">select</span> <span style="color:#960050;background-color:#1e0010">字段名</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">，字段名</span><span style="color:#ae81ff">2</span>... <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">表名；</span>
</code></pre></div><ul>
<li>注意：如果查询所有字段，则可以使用*来替代字段列表。</li>
</ul>
</li>
<li>
<p>去除重复：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">distinct</span>
</code></pre></div></li>
<li>
<p>计算列</p>
<ul>
<li>一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算）</li>
<li>ifnull(表达式1,表达式2)：null参与的运算，计算结果都为null
<ul>
<li>表达式1：哪个字段需要判断是否为null</li>
<li>如果该字段为null后的替换值。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>起别名：</p>
<ul>
<li>as：as也可以省略</li>
</ul>
</li>
<li>
<p>条件查询：</p>
<ul>
<li>where子句后跟条件</li>
<li>运算符
<ul>
<li>&gt;, &lt;, &lt;=, &gt;=, =, &lt;&gt;</li>
<li>BETWEEN&hellip;AND</li>
<li>IN（集合 ）</li>
<li>LIKE：模糊查询
<ul>
<li>占位符：
<ul>
<li>_：单个任意字符</li>
<li>%：多个任意字符</li>
</ul>
</li>
</ul>
</li>
<li>不能用!=或者=判断NULL，需要用IS NULL</li>
<li>and 或 &amp;&amp;</li>
<li>or 或 ||</li>
<li>not 或 ！</li>
</ul>
</li>
</ul>
</li>
<li>
<p>排序查询</p>
<ul>
<li>
<p>语法：order by 子句</p>
<ul>
<li>order by 排序字段1 排序方式1 ，  排序字段2 排序方式2&hellip;</li>
</ul>
</li>
<li>
<p>排序方式：</p>
<ul>
<li>ASC：升序，默认的。</li>
<li>DESC：降序。</li>
</ul>
</li>
<li>
<p>注意：</p>
<ul>
<li>如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>聚合查询：将一列数据作为一个整体，进行纵向的计算。</p>
<ul>
<li>
<p>count：计算个数</p>
<ul>
<li>一般选择非空的列：主键</li>
</ul>
</li>
<li>
<p>max：计算最大值</p>
</li>
<li>
<p>min：计算最小值</p>
</li>
<li>
<p>sum：计算和</p>
</li>
<li>
<p>avg：计算平均值</p>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>注意：聚合函数的计算，要排除NULL值，可以选择不包含非空的列进行计算，或者使用IFNULL函数</p>
</blockquote>
<ol start="8">
<li>分组查询</li>
</ol>
<ul>
<li>语法：group by 分组字段；</li>
<li>注意：
<ul>
<li>分组之后可以查询的字段：分组字段、聚合函数</li>
<li>where 和 having 的区别？
<ul>
<li>where 在分组之前进行限定，如果不满足条件，则不参与分组。having在分组之后进行限定，如果不满足结果，则不会被查询出来</li>
<li>where 后不可以跟聚合函数，having可以进行聚合函数的判断。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="9">
<li>分页查询</li>
</ol>
<ul>
<li>
<p>语法：limit 开始的索引,每页查询的条数;</p>
</li>
<li>
<p>公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数      &ndash; 每页显示3条记录</p>
<p>SELECT * FROM student LIMIT 0,3; &ndash; 第1页</p>
<p>SELECT * FROM student LIMIT 3,3; &ndash; 第2页</p>
<p>SELECT * FROM student LIMIT 6,3; &ndash; 第3页</p>
</li>
<li>
<p>limit 是一个MySQL&quot;方言&rdquo;</p>
</li>
</ul>
<h3 id="约束">约束</h3>
<ol>
<li>概念：对表中的数据进行限定，保证数据的正确性、有效性和完整性</li>
<li>分类：
<ol>
<li>主键约束：primary key</li>
<li>非空约束：not null</li>
<li>唯一约束：unique</li>
<li>外键约束：foreign key</li>
</ol>
</li>
</ol>
<h4 id="非空约束">非空约束</h4>
<p>值不能为null</p>
<ol>
<li>创建表时添加约束</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">stu</span>(
    id <span style="color:#66d9ef">INT</span>,
    NAME <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#75715e">-- name为非空
</span><span style="color:#75715e"></span>);
</code></pre></div><ol start="2">
<li>创建表完后，添加非空约束</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu MODIFY NAME <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>;
</code></pre></div><ol start="3">
<li>删除name的非空约束</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu MODIFY NAME <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">20</span>);
</code></pre></div><h4 id="唯一约束">唯一约束</h4>
<p>值不能重复</p>
<ol>
<li>创建表时，添加唯一约束</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">stu</span>(
	id <span style="color:#66d9ef">INT</span>,
	phone_number <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">UNIQUE</span> <span style="color:#75715e">-- 添加了唯一约束
</span><span style="color:#75715e"></span>);
</code></pre></div><ol start="2">
<li>删除唯一约束</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu <span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">INDEX</span> phone_number;
</code></pre></div><ol start="3">
<li>在创建表后，添加唯一约束</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu MODIFY phone_number <span style="color:#66d9ef">VARCHAR</span>(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">UNIQUE</span>;		
</code></pre></div><h4 id="主键约束">主键约束</h4>
<ol>
<li>
<p>注意：</p>
<ol>
<li>含义：非空且唯一</li>
<li>一张表只能有一个字段为主键</li>
<li>主键就是表中记录的唯一标识</li>
</ol>
</li>
<li>
<p>在创建表时，添加主键约束</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">stu</span>(
	id <span style="color:#66d9ef">int</span> <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span>, <span style="color:#75715e">-- 给id添加主键约束
</span><span style="color:#75715e"></span>	name <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">20</span>)
);
</code></pre></div><ol start="3">
<li>删除主键</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu <span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>;	
</code></pre></div><ol start="4">
<li>创建完表后，添加主键</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu MODIFY id <span style="color:#66d9ef">INT</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>;	
</code></pre></div><ol start="5">
<li>
<p>自动增长：</p>
<ol>
<li>概念：如果某一列是数值类型，使用<code>auto_increment</code>可以来完成值的自动增长</li>
<li>在创建表时，添加主键约束，并且完成主键自增长</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-MYSQL" data-lang="MYSQL"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">stu</span>(
 id <span style="color:#66d9ef">INT</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> <span style="color:#66d9ef">AUTO_INCREMENT</span>,
 name <span style="color:#a6e22e">VARCAHR</span>(<span style="color:#ae81ff">20</span>)
);
</code></pre></div><ol start="3">
<li>删除自动增长</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-MYSQL" data-lang="MYSQL"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu MODIFY id <span style="color:#66d9ef">INT</span>;
</code></pre></div><ol start="4">
<li>添加自动增长</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> stu MODIFY id <span style="color:#66d9ef">INT</span> <span style="color:#66d9ef">AUTO_INCREMENT</span>;
</code></pre></div></li>
</ol>
<h4 id="外键约束">外键约束</h4>
<p>让表与表之间产生关系，从而保证数据的正确性</p>
<ol>
<li>
<p>在创建表时，可以添加外键</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">stu</span>(
 ...
 constraints <span style="color:#960050;background-color:#1e0010">外键名称</span> <span style="color:#66d9ef">foreign</span> <span style="color:#66d9ef">key</span> (<span style="color:#960050;background-color:#1e0010">外键列名</span>) <span style="color:#66d9ef">references</span> <span style="color:#960050;background-color:#1e0010">主表名称</span>(<span style="color:#960050;background-color:#1e0010">主表列名称</span>)
);
</code></pre></div></li>
<li>
<p>删除外键</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> <span style="color:#960050;background-color:#1e0010">外键名称；</span>
</code></pre></div><ol start="3">
<li>创建表之后，添加外键</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">ADD</span> <span style="color:#66d9ef">CONSTRAINT</span> <span style="color:#960050;background-color:#1e0010">外键名</span> <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (<span style="color:#960050;background-color:#1e0010">外键字段名称</span>) <span style="color:#66d9ef">REFERENCES</span> <span style="color:#960050;background-color:#1e0010">主表名称</span>(<span style="color:#960050;background-color:#1e0010">主表列名称</span>);
</code></pre></div><ol start="4">
<li>级联操作</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">ADD</span> <span style="color:#66d9ef">CONSTRAINT</span> <span style="color:#960050;background-color:#1e0010">外键名称</span> 
					<span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (<span style="color:#960050;background-color:#1e0010">外键字段名称</span>) <span style="color:#66d9ef">REFERENCES</span> <span style="color:#960050;background-color:#1e0010">主表名称</span>(<span style="color:#960050;background-color:#1e0010">主表列名称</span>) <span style="color:#66d9ef">ON</span> <span style="color:#66d9ef">UPDATE</span> <span style="color:#66d9ef">CASCADE</span> <span style="color:#66d9ef">ON</span>
                    <span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">CASCADE</span>;
</code></pre></div><h2 id="三多表查询">三、多表查询</h2>
<h3 id="1-内连接">1. 内连接</h3>
<h4 id="隐式内连接">隐式内连接</h4>
<p>使用where消除无用数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> emp,dept <span style="color:#66d9ef">WHERE</span> emp.<span style="color:#f92672">`</span>dept_id<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> dept.<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>;
</code></pre></div><p>或者使用如下语句，可以给表起别名，从而简化写法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> 
    t1.name, <span style="color:#75715e">-- 员工表的姓名
</span><span style="color:#75715e"></span>    t1.gender,<span style="color:#75715e">-- 员工表的性别
</span><span style="color:#75715e"></span>    t2.name <span style="color:#75715e">-- 部门表的名称
</span><span style="color:#75715e"></span><span style="color:#66d9ef">FROM</span>
    emp t1,  <span style="color:#f92672">--</span><span style="color:#960050;background-color:#1e0010">起别名</span>
    dept t2  <span style="color:#f92672">--</span><span style="color:#960050;background-color:#1e0010">起别名</span>
<span style="color:#66d9ef">WHERE</span> 
    t1.<span style="color:#f92672">`</span>dept_id<span style="color:#f92672">`</span> <span style="color:#f92672">=</span> t2.<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>;
</code></pre></div><h4 id="显式内连接">显式内连接</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">select</span> <span style="color:#960050;background-color:#1e0010">字段列表</span> <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">表名</span><span style="color:#ae81ff">1</span> [<span style="color:#66d9ef">inner</span>] <span style="color:#66d9ef">join</span> <span style="color:#960050;background-color:#1e0010">表名</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">on</span> <span style="color:#960050;background-color:#1e0010">条件</span>
</code></pre></div><h3 id="2-外连接">2. 外连接</h3>
<p>左外连接：左表以及左表与右表的交集</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">select</span> <span style="color:#960050;background-color:#1e0010">字段列表</span> <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">表</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">left</span> [<span style="color:#66d9ef">outer</span>] <span style="color:#66d9ef">join</span> <span style="color:#960050;background-color:#1e0010">表</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">on</span> <span style="color:#960050;background-color:#1e0010">条件；</span>
</code></pre></div><p>右外连接：右表以及右表与左表的交集</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">select</span> <span style="color:#960050;background-color:#1e0010">字段列表</span> <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">表</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">right</span> [<span style="color:#66d9ef">outer</span>] <span style="color:#66d9ef">join</span> <span style="color:#960050;background-color:#1e0010">表</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">on</span> <span style="color:#960050;background-color:#1e0010">条件</span>;
</code></pre></div><h2 id="四子查询">四、子查询</h2>
<p>查询中嵌套查询，称嵌套查询为子查询</p>
<p>子查询分为以下三种不同情况：</p>
<ol>
<li>子查询结果是单行单列的，子查询可以作为条件，使用运算符去判断。运算符有：&gt;, &gt;=, &lt;, &lt;=, =</li>
<li>子查询的结果是多行单列的：子查询结果可以作为条件，使用运算符<code>in</code>来判断</li>
<li>子查询的结果是多行多列的：子查询的结果可以作为一个虚拟表，参与查询</li>
</ol>
<h2 id="五数据库的设计">五、数据库的设计</h2>
<h3 id="1-多表之间的关系">1. 多表之间的关系</h3>
<ol>
<li>一对一
<ul>
<li>一对一关系实现，可以在任意一方添加唯一外键指向另一方外键，或直接集成在一张表中</li>
</ul>
</li>
<li>一对多
<ul>
<li>在多的一方建立外键，指向一的一方主键</li>
</ul>
</li>
<li>多对多
<ul>
<li>多对多实现需要借助第三张中间表，中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键</li>
</ul>
</li>
</ol>
<h3 id="2-数据库设计范式">2. 数据库设计范式</h3>
<p>设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求。目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。</p>
<ol>
<li>第一范式（1NF）：每一列都是不可分割的原子数据项</li>
<li>第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）</li>
<li>第三范式（3NF）：在2NF的基础上，消除传递依赖</li>
</ol>
<blockquote>
<p>一些概念：</p>
<ol>
<li>
<p>函数依赖：A&ndash;&gt;B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A
例如：学号&ndash;&gt;姓名。  （学号，课程名称） &ndash;&gt; 分数</p>
</li>
<li>
<p>完全函数依赖：A&ndash;&gt;B， 如果A是一个<strong>属性组</strong>，则B属性值得确定需要依赖于A属性组中所有的属性值。
例如：（学号，课程名称） &ndash;&gt; 分数</p>
</li>
<li>
<p>部分函数依赖：A&ndash;&gt;B， 如果A是一个<strong>属性组</strong>，则B属性值得确定只需要依赖于A属性组中某一些值即可。					例如：（学号，课程名称） &ndash; &gt; 姓名</p>
</li>
<li>
<p>传递函数依赖：A&ndash;&gt;B, B&ndash;&gt;C</p>
<p>​					例如：学号&ndash;&gt;系名，系名&ndash;&gt;系主任</p>
</li>
<li>
<p>码：如果在一张表中，一个属性或者一个属性组，被其他所有属性所完全依赖，则称这个属性（属性组）为该表的码</p>
<p>​					例如：该表中码为：（学号，课程名称）</p>
<ul>
<li>主属性：码属性组中的所有属性</li>
<li>非主属性：除过码属性组的属性</li>
</ul>
</li>
</ol>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfkw2ntonej310y0t2aza.jpg" alt="image-20191208224853847"></p>
<p>分析上表，<strong>学号和课程名称</strong>组成的属性组是码，则这两个属性也就是主属性。可见，姓名只需要学号就可以确定，所以对于码而言，是一个部分函数依赖，系所、系主任也是，因此将其剥离，也就是根据第二范式，可以将上表修改为下图。</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfkw2pljs2j31z20u07wh.jpg" alt="image-20191208225906983"></p>
<p>但此表仍然存在问题，虽然右边的表满足于范式二，但是存在传递函数依赖，如果此时我想设立一个计算机系，然而该系还未招生，就无法把这种关系表现出来，因此继续剥离，变成以下三个表</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfkw2qgo8tj319x0u0axl.jpg" alt="image-20191208225839666"></p>
<h2 id="六数据库的备份还原">六、数据库的备份还原</h2>
<ol>
<li>命令行：
<ul>
<li>备份： mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径</li>
<li>还原：
<ol>
<li>登录数据库</li>
<li>创建数据库</li>
<li>使用数据库</li>
<li>执行文件       source 文件路径</li>
</ol>
</li>
</ul>
</li>
<li>图形化工具：</li>
</ol>
<h2 id="七事务">七、事务</h2>
<h3 id="71-概念">7.1 概念</h3>
<p>如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。（在提交事务之前， 进行的操作都不针对实际的数据）</p>
<ul>
<li>操作：
<ul>
<li>开启事务：start trasaction；</li>
<li>回滚：rollback；</li>
<li>提交：commit；</li>
<li>事务的提交有两种方式：
<ul>
<li>自动提交：mysql就是自动提交</li>
<li>手动提交：需要先开启事务，再提交</li>
<li>查询方式：SELECT @@autocommit;</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="72-事务的四大特征">7.2 事务的四大特征</h3>
<ol>
<li>原子性：是不可分割的最小单位，要么同时成功，要么同时失败</li>
<li>持久性：当事务提交或回滚后，数据库会持久化的保存数据。</li>
<li>隔离性：多个事务之间。相互独立。</li>
<li>一致性：事务操作前后，数据总量不变。</li>
</ol>
<h3 id="73-事务的隔离级别">7.3 事务的隔离级别</h3>
<ul>
<li>
<p>概念：<strong>多个事务之间</strong>本应该隔离的，相互独立的，如果多个事务操作同一批数据，会引发一些问题，设置不同的隔离级别可以解决这些问题</p>
</li>
<li>
<p>存在问题：</p>
<ul>
<li>脏读：一个失误，读取到另一个事务中没有提交的数据。</li>
<li>不可重复读：在同一个事务中，两次读取到的数据不一样。</li>
<li>幻读：一个事务操作数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改（mysql不能存在）</li>
</ul>
</li>
<li>
<p>隔离级别</p>
<ul>
<li>read uncommitted：读未提交
<ul>
<li>产生问题：脏读、不可重复读、幻读</li>
</ul>
</li>
<li>read committed：读已提交
<ul>
<li>残生问题：不可重复读、幻读</li>
</ul>
</li>
<li>repeatable read：可重复度
<ul>
<li>产生问题：幻读</li>
</ul>
</li>
<li>serializable：串行化
<ul>
<li>可解决所有问题</li>
</ul>
</li>
</ul>
</li>
</ul>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/classload/" data-toggle="tooltip" data-placement="top" title="JVM类加载机制">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/classloader/" data-toggle="tooltip" data-placement="top" title="类加载器与双亲委派模型">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                    
                    <li>
                        <a href="mailto:is.eric.wu@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://weibo.com/1965461781/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    

		    
                    
                    <li>
                        <a target="_blank" href="/img/we_chat.JPG">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-wechat fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a target="_blank" href="https://github.com/ericwu0930/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/hao-wu-5566a416a">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; Eric&#39;s Blog 2020
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-158682233-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</body>
</html>
